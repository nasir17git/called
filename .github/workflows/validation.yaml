name: validation
run-name: validation - ${{github.workflow}}

on:
  push:
    branches:
      - main
  pull_request:
  workflow_call:
    outputs:
      in_progress_check:
        value: ${{ jobs.validation.outputs.in_progress_check }}
jobs:
  validation:
    runs-on: ubuntu-latest
    outputs:
      in_progress_check: ${{ steps.validation.outputs.in_progress_check }}
    steps:
      - uses: actions/checkout@v3
      - name: validation
        id: validation
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          in_progress_check=$(gh run list --workflow ${{github.workflow}} --json status -q '.[].status' | grep in_progress | wc -l)
          echo "in_progress_check=${in_progress_check}" >> $GITHUB_OUTPUT
          echo $in_progress_check
      - name: wait
        run: sleep 15
      - name: echo
        run: |
          echo ${{ steps.validation.outputs.in_progress_check }}